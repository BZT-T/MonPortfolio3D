<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio 3D - Plan√®te Interactive</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- √âtoiles de fond -->
    <div class="stars" id="stars"></div>

    <!-- Canvas Three.js -->
    <div id="canvas-container"></div>

    <!-- Interface overlay -->
    <div class="ui-overlay">
        <div class="title">
            <h1>Portfolio</h1>
            <p>Explorez mon univers</p>
        </div>

        <div class="instructions">
            Cliquez sur les √Æles pour d√©couvrir mon parcours
        </div>
    </div>

    <!-- Labels des √Æles -->
    <div id="island-labels"></div>

    <!-- Backdrop -->
    <div class="modal-backdrop" id="backdrop"></div>

    <!-- Modals -->
    <div class="modal green" id="modal-presentation">
        <div class="modal-header">
            <div class="modal-title">
                <span class="modal-icon">üè†</span>
                <span>Pr√©sentation</span>
            </div>
            <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-content">
            <h3>Qui suis-je ?</h3>
            <p>Bonjour ! Je suis un d√©veloppeur passionn√© par la cr√©ation d'exp√©riences web innovantes et immersives.
            </p>

            <h3>Mon parcours</h3>
            <p>Dipl√¥m√© en d√©veloppement web, j'ai acquis une solide exp√©rience dans la conception d'interfaces modernes
                et l'int√©gration de technologies 3D.</p>

            <h3>Mes passions</h3>
            <ul>
                <li>D√©veloppement web cr√©atif</li>
                <li>Design d'interfaces immersives</li>
                <li>Technologies 3D (Three.js, WebGL)</li>
                <li>Exp√©riences utilisateur innovantes</li>
            </ul>
        </div>
    </div>

    <div class="modal orange" id="modal-projets">
        <div class="modal-header">
            <div class="modal-title">
                <span class="modal-icon">üíº</span>
                <span>Projets</span>
            </div>
            <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-content">
            <h3>Mes r√©alisations</h3>

            <div class="project-card">
                <h4>üåê Application Web E-commerce</h4>
                <p>D√©veloppement complet d'une plateforme de vente en ligne avec React et Node.js. Interface moderne et
                    responsive avec syst√®me de paiement int√©gr√©.</p>
            </div>

            <div class="project-card">
                <h4>üéÆ Jeu Interactif 3D</h4>
                <p>Cr√©ation d'un jeu de puzzle en 3D utilisant Three.js et des physiques r√©alistes. Exp√©rience immersive
                    avec sons et animations fluides.</p>
            </div>

            <div class="project-card">
                <h4>üì± Application Mobile Fitness</h4>
                <p>Application React Native pour le suivi d'entra√Ænements sportifs. Int√©gration de graphiques de
                    progression et syst√®me de notifications.</p>
            </div>

            <div class="project-card">
                <h4>üé® Site Portfolio Interactif</h4>
                <p>Portfolio 3D avec plan√®te interactive (vous √™tes dessus !). Technologies : Three.js, WebGL,
                    animations avanc√©es.</p>
            </div>
        </div>
    </div>

    <div class="modal blue" id="modal-competences">
        <div class="modal-header">
            <div class="modal-title">
                <span class="modal-icon">üõ†Ô∏è</span>
                <span>Comp√©tences</span>
            </div>
            <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-content">
            <h3>Technologies Frontend</h3>
            <div class="skill-grid">
                <div class="skill-item">HTML5</div>
                <div class="skill-item">CSS3</div>
                <div class="skill-item">JavaScript</div>
                <div class="skill-item">React</div>
                <div class="skill-item">Vue.js</div>
                <div class="skill-item">Three.js</div>
            </div>

            <h3>Technologies Backend</h3>
            <div class="skill-grid">
                <div class="skill-item">Node.js</div>
                <div class="skill-item">Express</div>
                <div class="skill-item">MongoDB</div>
                <div class="skill-item">PostgreSQL</div>
                <div class="skill-item">REST API</div>
                <div class="skill-item">GraphQL</div>
            </div>

            <h3>Outils & Autres</h3>
            <div class="skill-grid">
                <div class="skill-item">Git</div>
                <div class="skill-item">Docker</div>
                <div class="skill-item">Figma</div>
                <div class="skill-item">Blender</div>
                <div class="skill-item">WebGL</div>
                <div class="skill-item">GSAP</div>
            </div>
        </div>
    </div>

    <div class="modal purple" id="modal-contact">
        <div class="modal-header">
            <div class="modal-title">
                <span class="modal-icon">üìß</span>
                <span>Contact</span>
            </div>
            <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-content">
            <h3>Travaillons ensemble !</h3>
            <p>Je suis toujours ouvert √† de nouveaux projets et collaborations. N'h√©sitez pas √† me contacter !</p>

            <h3>Coordonn√©es</h3>
            <ul>
                <li>üìß Email : votre.email@exemple.com</li>
                <li>üíº LinkedIn : linkedin.com/in/votre-profil</li>
                <li>üêô GitHub : github.com/votre-username</li>
                <li>üåê Site web : www.votre-site.com</li>
            </ul>

            <h3>Disponibilit√©</h3>
            <p>Actuellement disponible pour des projets freelance et des opportunit√©s en CDI.</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script>
        // Cr√©er les √©toiles en arri√®re-plan
        function createStars() {
            const container = document.getElementById('stars');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                container.appendChild(star);
            }
        }
        createStars();

        // Configuration Three.js
        let scene, camera, renderer, planet, islands = [];
        let mouseX = 0, mouseY = 0;
        let raycaster, mouse;
        let isRotating = true;

        function init() {
            // Sc√®ne
            scene = new THREE.Scene();

            // Cam√©ra
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 8;

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000000, 0);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // Raycaster pour la d√©tection de clics
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // Lumi√®res
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const pointLight1 = new THREE.PointLight(0x00ff88, 1, 100);
            pointLight1.position.set(10, 10, 10);
            scene.add(pointLight1);

            const pointLight2 = new THREE.PointLight(0x4ecdc4, 0.8, 100);
            pointLight2.position.set(-10, -10, 10);
            scene.add(pointLight2);

            // Cr√©er la plan√®te
            createPlanet();

            // Cr√©er les √Æles
            createIslands();

            // Events
            window.addEventListener('resize', onWindowResize);
            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('click', onClick);

            // Animation
            animate();
        }

        function createPlanet() {
            // 1. On cr√©e un groupe vide qui servira de "pivot"
            planet = new THREE.Group();
            scene.add(planet);

            // 2. On charge le fichier GLB
            const loader = new THREE.GLTFLoader();
            loader.load('asset/Planete.glb', function (gltf) {
                const model = gltf.scene;

                // Ajuste la taille si ta plan√®te est trop grande ou trop petite
                model.scale.set(2, 2, 2);

                planet.add(model);
                console.log("Plan√®te charg√©e avec succ√®s !");
            }, undefined, function (error) {
                console.error("Erreur de chargement :", error);
                // Optionnel : recr√©er la sph√®re par d√©faut ici si le fichier √©choue
            });

            // 3. On garde tes anneaux atmosph√©riques
            const ringGeometry = new THREE.RingGeometry(3.2, 3.4, 64);
            const ringMaterial = new THREE.MeshBasicMaterial({
                color: 0x00ff88,
                transparent: true,
                opacity: 0.15,
                side: THREE.DoubleSide
            });
            const ring = new THREE.Mesh(ringGeometry, ringMaterial);
            ring.rotation.x = Math.PI / 2;
            planet.add(ring);
        }

        function createIslands() {
            const islandData = [
                {
                    position: [2, 1.5, 1.5],
                    color: 0x00ff88,
                    size: 0.35,
                    name: 'Pr√©sentation',
                    modal: 'modal-presentation',
                    emoji: 'üè†'
                },
                {
                    position: [-1.5, 1.8, 2],
                    color: 0xff6b35,
                    size: 0.4,
                    name: 'Projets',
                    modal: 'modal-projets',
                    emoji: 'üíº'
                },
                {
                    position: [1, -2, 1.8],
                    color: 0x4ecdc4,
                    size: 0.38,
                    name: 'Comp√©tences',
                    modal: 'modal-competences',
                    emoji: 'üõ†Ô∏è'
                },
                {
                    position: [-2.2, -0.5, 1.5],
                    color: 0xa855f7,
                    size: 0.32,
                    name: 'Contact',
                    modal: 'modal-contact',
                    emoji: 'üìß'
                }
            ];

            islandData.forEach(data => {
                // Base de l'√Æle (cylindre aplati)
                const baseGeometry = new THREE.CylinderGeometry(data.size, data.size * 0.8, 0.3, 16);
                const baseMaterial = new THREE.MeshStandardMaterial({
                    color: data.color,
                    roughness: 0.5,
                    metalness: 0.2,
                    emissive: data.color,
                    emissiveIntensity: 0.3
                });
                const base = new THREE.Mesh(baseGeometry, baseMaterial);

                // Sommet de l'√Æle (c√¥ne)
                const topGeometry = new THREE.ConeGeometry(data.size * 0.7, 0.4, 16);
                const topMaterial = new THREE.MeshStandardMaterial({
                    color: data.color,
                    roughness: 0.4,
                    metalness: 0.3,
                    emissive: data.color,
                    emissiveIntensity: 0.4
                });
                const top = new THREE.Mesh(topGeometry, topMaterial);
                top.position.y = 0.35;

                // Groupe √Æle
                const island = new THREE.Group();
                island.add(base);
                island.add(top);
                island.position.set(...data.position);

                // Ajouter un halo lumineux
                const glowGeometry = new THREE.SphereGeometry(data.size * 1.3, 16, 16);
                const glowMaterial = new THREE.MeshBasicMaterial({
                    color: data.color,
                    transparent: true,
                    opacity: 0.15,
                    side: THREE.BackSide
                });
                const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                island.add(glow);

                // M√©tadonn√©es pour l'interaction
                island.userData = {
                    name: data.name,
                    modal: data.modal,
                    emoji: data.emoji,
                    color: '#' + data.color.toString(16).padStart(6, '0')
                };

                planet.add(island);
                islands.push(island);
            });

            // Cr√©er les labels
            createLabels();
        }

        function createLabels() {
            const container = document.getElementById('island-labels');
            islands.forEach(island => {
                const label = document.createElement('div');
                label.className = 'island-label';
                label.style.borderColor = island.userData.color;
                label.textContent = `${island.userData.emoji} ${island.userData.name}`;
                label.dataset.island = island.userData.name;
                container.appendChild(label);
            });
        }

        function updateLabels() {
            const labels = document.querySelectorAll('.island-label');
            islands.forEach((island, index) => {
                const vector = new THREE.Vector3();
                island.getWorldPosition(vector);
                vector.project(camera);

                const x = (vector.x * 0.5 + 0.5) * window.innerWidth;
                const y = (-(vector.y * 0.5) + 0.5) * window.innerHeight;

                const label = labels[index];
                label.style.left = x + 'px';
                label.style.top = y + 'px';

                // V√©rifier si l'√Æle est visible
                if (vector.z < 1) {
                    label.classList.add('visible');
                } else {
                    label.classList.remove('visible');
                }
            });
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onMouseMove(event) {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(event.clientY / window.innerHeight) * 2 + 1;

            // Pour le raycaster
            mouse.x = mouseX;
            mouse.y = mouseY;

            // Mettre √† jour le raycaster
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(islands, true);

            // Changer le curseur
            if (intersects.length > 0) {
                document.body.style.cursor = 'pointer';
            } else {
                document.body.style.cursor = 'default';
            }
        }

        function onClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(islands, true);

            if (intersects.length > 0) {
                // Trouver le groupe √Æle parent
                let island = intersects[0].object;
                while (island.parent && !island.userData.modal) {
                    island = island.parent;
                }

                if (island.userData.modal) {
                    openModal(island.userData.modal);
                }
            }
        }

        function animate() {
            requestAnimationFrame(animate);

            // Rotation automatique de la plan√®te
            if (isRotating) {
                planet.rotation.y += 0.002;
            }

            // L√©g√®re inclinaison avec la souris
            planet.rotation.x += (mouseY * 0.1 - planet.rotation.x) * 0.05;
            planet.rotation.y += (mouseX * 0.1 - planet.rotation.y) * 0.05;

            // Animation des √Æles
            islands.forEach((island, index) => {
                island.rotation.y += 0.01;
                island.children[2].scale.x = island.children[2].scale.y = island.children[2].scale.z =
                    1 + Math.sin(Date.now() * 0.001 + index) * 0.1;
            });

            updateLabels();
            renderer.render(scene, camera);
        }

        // Gestion des modals
        function openModal(modalId) {
            isRotating = false;
            document.getElementById('backdrop').classList.add('active');
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal() {
            isRotating = true;
            document.getElementById('backdrop').classList.remove('active');
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
        }

        // Fermer avec le backdrop
        document.getElementById('backdrop').addEventListener('click', closeModal);

        // Fermer avec Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Initialiser
        init();
    </script>
</body>

</html>